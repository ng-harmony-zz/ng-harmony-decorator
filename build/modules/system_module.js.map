{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"system_module.js","sourcesContent":["import { Reflect } from \"reflect-metadata\";\nimport { Log, NotImplementedError, VoidError, InMemoryTypeValidationError} from \"ng-harmony-log\";\n\nexport function Component(val) {\n\treturn function decorator(target) {\n\t\tlet mod = angular.module(val.module) || angular.module(val.module, []);\n\t\tmod.directive(val.selector, () => {\n\t\t\treturn {\n\t\t\t\tcontroller: val.controller,\n\t\t\t\tcontrollerAs: val.controllerAs || target.CTRL_AS || null,\n\t\t\t\trestrict: val.restrict || \"A\",\n\t\t\t\treplace: val.replace || false,\n\t\t\t\ttemplateUrl: val.templateUrl || null,\n\t\t\t\ttemplate: val.template || null,\n\t\t\t\tscope: val.scope === true ? {} : (val.scope || null)\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function Controller(val) {\n\treturn function decorator(target) {\n\t\ttarget.CTRL_AS = val.controllerAs || null;\n\t\t\n\t\tlet r = {};\n\t\tr[val.module] = {\n\t\t\ttype: \"controller\",\n\t\t\tname: val.name || target.name,\n\t\t}\n\t\ttarget.$register = r;\n\t\tif (val.deps !== null && typeof val.deps !== \"undefined\") {\n\t\t\ttarget.$inject = val.deps;\n\t\t}\n\t}\n}\n\nexport function Service(val) {\n\treturn function decorator(target) {\n\t\tlet r = {};\n\t\tr[val.module] = {\n\t\t\ttype: \"service\",\n\t\t\tname: val.name\n\t\t}\n\t\ttarget.$register = r;\n\t\tif (val.deps !== null && typeof val.deps !== \"undefined\") {\n\t\t\ttarget.$inject = val.deps;\n\t\t}\n\t}\n}\n\nexport function Mixin(...mixins) {\n\treturn function decorator(target) {\n\t\tfor (let [i, mixin] of mixins.entries()) {\n\t\t\tObject.getOwnPropertyNames(mixin.prototype).forEach((k, j) => {\n\t\t\t\t(target.prototype[k] === null || typeof target.prototype[k] === \"undefined\") &&\n\t\t\t\tObject.defineProperty(target.prototype, k, Object.getOwnPropertyDescriptor(mixin.prototype, k));\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function Implements(...interfaces) {\n\treturn function decorator(target) {\n\t\tfor (let [i, Interface] of interfaces.entries()) {\n\t\t\tObject.getOwnPropertyNames(Interface.prototype).forEach((k, j) => {\n\t\t\t\t(target.prototype[k] === null || typeof target.prototype[k] === \"undefined\") &&\n\t\t\t\tObject.defineProperty(target.prototype, k, {\n\t\t\t\t\tvalue: () => { throw new NotImplementedError(k); },\n\t\t\t\t\tenumerable: true\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function Logging(config) {\n\treturn function decorator(target) {\n\t\tObject.getOwnPropertyNames(Log.prototype).forEach((k, j) => {\n\t\t\t(target.prototype[k] === null || typeof target.prototype[k] === \"undefined\") &&\n\t\t\tObject.defineProperty(target.prototype, k, Object.getOwnPropertyDescriptor(Log.prototype, k));\n\t\t});\n\t\tLog.create.call(target.constructor, {\n\t\t\trollbarToken: config.remoteLoggerToken || null,\n\t\t\tenvironment: config.environment,\n\t\t\tnpmPackageVersion: config.npmPackageVersion\n\t\t});\n\t}\n}\n\nexport function Validate() {\n\treturn function decorator(target, prop, descriptor) {\n\t\tlet isNullable = (Reflect.hasMetadata(\"nullable\", target[prop]) && Reflect.getMetadata(\"nullable\", target[prop]));\n\n\t\tdescriptor.configurable = true;\n\t\tdescriptor.enumerable = true;\n\t\tdescriptor.writable = true;\n\t\tdescriptor.get = () => {\n\t\t\treturn target[prop];\n\t\t}\n\t\tdescriptor.set = (val) => {\n\t\t\tif (val === null || typeof val === \"undefined\") {\n\t\t\t\tif (isNullable) {\n\t\t\t\t\ttarget[prop] = val;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new VoidError();\n\t\t\t\t}\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof this[`_${prop}`] === \"function\") {\n\t\t\t\t\tthis[`_${prop}`](val);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tif (e.level === \"info\" || e.level ===\"debug\") {\n\t\t\t\t\tthis.log(e);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Reflect.hasMetadata(\"typeof\", target[prop])) {\n\t\t\t\tlet metadata = Reflect.getMetadata(\"typeof\", target[prop]);\n\t\t\t\tlet t = metadata.type.name.toLowerCase();\n\t\t\t\tif (val instanceof metadata.type) {\n\t\t\t\t\ttarget[prop] = val;\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\ttarget[prop] = new metadata.type(val);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {\n\t\t\t\t\t\tthis.log(new InMemoryTypeValidationError());\n\t\t\t\t\t\tthrow e;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function Nullable () {\n\treturn function decorator(target, prop, descriptor) {\n\t\tif (typeof target[prop] === \"undefined\") {\n\t\t\ttarget[prop] = null;\n\t\t}\n\t\tReflect.defineMetadata(\"nullable\", true, target, prop);\n\t}\n}\n\nexport function Transform(derive) {\n\treturn function decorator(target, prop, descriptor) {\n\t\tlet isNullable = (Reflect.hasMetadata(\"nullable\", target[prop]) && Reflect.getMetadata(\"nullable\", target[prop]));\n\n\t\tdescriptor.configurable = true;\n\t\tdescriptor.enumerable = false;\n\t\tdescriptor.writable = true;\n\t\tdescriptor.get = () => {\n\t\t\tif (target[prop] === null || typeof target[prop] === \"undefined\") {\n\t\t\t\tif (isNullable) {\n\t\t\t\t\treturn null;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new VoidError();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn target[`_$(prop)`];\n\t\t}\n\t\tdescriptor.set = (_o) => {\n\t\t\ttry {\n\t\t\t\tif (_o === null || typeof _o === \"undefined\") {\n\t\t\t\t\tif (isNullable) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthrow new VoidError(\"No Input given\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttarget[`_$(prop)`] = derive(_o);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tif (e.level === \"info\" || e.level ===\"debug\") {\n\t\t\t\t\tthis.log(e);\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function AjaxMap(o) {\n\treturn function decorator (target, prop, descriptor) {\n\t\ttarget.MAP = o;\n\t}\n}\n\nexport function Evented (...o) {\n\treturn function decorator (target, prop, descriptor) {\n\t\ttarget.constructor.EVENTS = target.constructor.EVENTS || [];\n\t\to.forEach((ev) => { target.constructor.EVENTS.push({\n\t\t\tev: ev,\n\t\t\tfn: prop\n\t\t}); });\n\t}\n}"]}