{"version":3,"sources":["../index.js"],"names":[],"mappings":"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","file":"common_module.js","sourcesContent":["import \"ng-harmony-log\";\nimport \"reflect-metadata\";\n\nexport function Tag(val) {\n\treturn function decorator(target) {\n\t\tlet mod = angular.module(val.module) || angular.module(val.module, []);\n\t\tmod.directive(val.selector, () => {\n\t\t\treturn {\n\t\t\t\tcontroller: val.ctrl,\n\t\t\t\trestrict: val.restrict || \"A\",\n\t\t\t\treplace: val.replace || false,\n\t\t\t\ttemplateUrl: val.templateUrl || null,\n\t\t\t\ttemplate: val.template || null,\n\t\t\t\tscope: val.scope === true ? {} : (val.scope || null)\n\t\t\t}\n\t\t});\n\n\t}\n}\n\nexport function Controller(val) {\n\treturn function decorator(target) {\n\t\tlet r = {};\n\t\tr[val.module] = {\n\t\t\ttype: \"controller\",\n\t\t\tname: val.name\n\t\t}\n\t\ttarget.$register = r;\n\t\tif (val.deps !== null && typeof val.deps !== \"undefined\") {\n\t\t\ttarget.$inject = val.deps;\n\t\t}\n\t}\n}\n\nexport function Service(val) {\n\treturn function decorator(target) {\n\t\tlet r = {};\n\t\tr[val.module] = {\n\t\t\ttype: \"service\",\n\t\t\tname: val.name\n\t\t}\n\t\ttarget.$register = r;\n\t\tif (val.deps !== null && typeof val.deps !== \"undefined\") {\n\t\t\ttarget.$inject = val.deps;\n\t\t}\n\t}\n}\n\nexport function Transient(val) {\n\treturn function decorator(target) {\n\t\ttarget.LISTENERS = val;\n\t}\n}\n\nexport function Mixin(val) {\n\treturn function decorator(target) {\n\t\tif (Array.isArray(val)) {\n\t\t\ttarget.mixin(...val);\n\t\t} else {\n\t\t\ttarget.mixin(val);\n\t\t}\n\t}\n}\n\nexport function Implements(val) {\n\treturn function decorator(target) {\n\t\tif (Array.isArray(val)) {\n\t\t\ttarget.implement(...val);\n\t\t} else {\n\t\t\ttarget.implement(val);\n\t\t}\n\t}\n}\n\nexport function Logging() {\n\treturn function decorator(target) {\n\t\ttarget.mixin(Log);\n\t}\n}\n\nexport function Validate() {\n\treturn function decorator(target, prop, descriptor) {\n\t\tlet isNullable = (Reflect.hasMetadata(\"nullable\", p) && Reflect.getMetadata(\"nullable\", p));\n\n\t\tif (isNullable) {\n\t\t\ttarget[prop] = null;\n\t\t}\n\n\t\tdescriptor.configurable = true;\n\t\tdescriptor.enumerable = true;\n\t\tdescriptor.writable = true;\n\t\tdescriptor.get = () => {\n\t\t\treturn target[prop];\n\t\t}\n\t\tdescriptor.set = (val) => {\n\t\t\tif (val === null || typeof val === \"undefined\")\n\t\t\t\tif (isNullable) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthrow new VoidError();\n\t\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof this[`_${prop}`] !== \"undefined\" && this[`_${prop}`] !== null)\n\t\t\t\t\tthis[`_${prop}`](val);\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tif (e.level === \"info\" || e.level ===\"debug\") {\n\t\t\t\t\tthis.log(e);\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (Reflect.hasMetadata(\"typeof\", target[prop])) {\n\t\t\t\tlet metadata = Reflect.getMetadata(\"typeof\", target[prop]);\n\t\t\t\tlet t = metadata.type.name.toLowerCase();\n\t\t\t\tif (val instanceof metadata.type) {\n\t\t\t\t\ttarget = new metadata.type(val);\n\t\t\t\t} else if (typeof val == t) {\n\t\t\t\t\ttarget = val;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new InMemoryTypeValidationError();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\nexport function Nullable () {\n\treturn function decorator(target, prop, descriptor) {\n\t\tReflect.defineMetadata(\"nullable\", true, target, prop);\n\t}\n}"]}